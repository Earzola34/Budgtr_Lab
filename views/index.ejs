<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All the Budgets</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.0/normalize.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/skeleton/2.0.4/skeleton.css">
    <style>
        body {
            text-align: center;
        }
    </style>
</head>
<% console.log(budgets) %>
<body>
    <h1>Budgtr</h1>
    <div class="container">
        <% let total = 0; %>
        <table>
            <% for(let i = 0; i < budgets.length; i++) {%>
                <% total += budgets[i].amount %>
            <tr>
                <td>
                    <%= budgets[i].date %>
                </td>
                <td>
                    <a href="/budgets/<%= i %>"><%= budgets[i].name %></a>
                </td>
                <td>
                    <%= budgets[i].from %>
                </td>
                <td>
                    Amount: <%= budgets[i].amount %>
                </td>
            </tr>
            <% } %>
            
            <% if( total < 0) { %>
                <p style="margin: 0px; background-color: red;"> Total: $<%= total %></p>
            <% } %>
            <% if( total > 1000) { %>
                <p style="margin: 0px; background-color: green;">Total: $<%= total %></p>
            <% } %>
            <% if(total > 0 && total < 1000){ %>
                <p style="margin:0px;">Total: $<%= total %></p>
            <%  } %>
        </table>
        <button onclick = "window.location.href='http://localhost:4000/budgets/new';">New</button></tr>

    </div>
</body>
</html>